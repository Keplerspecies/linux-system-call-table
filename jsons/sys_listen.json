{"Man page": "<pre><br><span class=\"headline\">LISTEN(2)                 Linux Programmer's Manual                LISTEN(2)</span><br></pre><br><h2>NAME  </h2><pre><br>       listen - listen for connections on a socket<br></pre><br><h2>SYNOPSIS  </h2><pre><br>       <b>#include &lt;sys/types.h&gt;          </b>/* See NOTES */<br>       <b>#include &lt;sys/socket.h&gt;</b><br><br>       <b>int listen(int </b><i>sockfd</i><b>, int </b><i>backlog</i><b>);</b><br></pre><br><h2>DESCRIPTION  </h2><pre><br>       <b>listen</b>() marks the socket referred to by <i>sockfd</i> as a passive socket,<br>       that is, as a socket that will be used to accept incoming connection<br>       requests using accept(2).<br><br>       The <i>sockfd</i> argument is a file descriptor that refers to a socket of<br>       type <b>SOCK_STREAM </b>or <b>SOCK_SEQPACKET</b>.<br><br>       The <i>backlog</i> argument defines the maximum length to which the queue of<br>       pending connections for <i>sockfd</i> may grow.  If a connection request<br>       arrives when the queue is full, the client may receive an error with<br>       an indication of <b>ECONNREFUSED </b>or, if the underlying protocol supports<br>       retransmission, the request may be ignored so that a later reattempt<br>       at connection succeeds.<br></pre><br><h2>RETURN VALUE  </h2><pre><br>       On success, zero is returned.  On error, -1 is returned, and <i>errno</i> is<br>       set appropriately.<br></pre><br><h2>ERRORS  </h2><pre><br>       <b>EADDRINUSE</b><br>              Another socket is already listening on the same port.<br><br>       <b>EADDRINUSE</b><br>              (Internet domain sockets) The socket referred to by <i>sockfd</i> had<br>              not previously been bound to an address and, upon attempting<br>              to bind it to an ephemeral port, it was determined that all<br>              port numbers in the ephemeral port range are currently in use.<br>              See the discussion of <i>/proc/sys/net/ipv4/ip_local_port_range</i><br>              in ip(7).<br><br>       <b>EBADF  </b>The argument <i>sockfd</i> is not a valid descriptor.<br><br>       <b>ENOTSOCK</b><br>              The argument <i>sockfd</i> is not a socket.<br><br>       <b>EOPNOTSUPP</b><br>              The socket is not of a type that supports the <b>listen</b>()<br>              operation.<br></pre><br><h2>CONFORMING TO  </h2><pre><br>       POSIX.1-2001, POSIX.1-2008, 4.4BSD (<b>listen</b>() first appeared in<br>       4.2BSD).<br></pre><br><h2>NOTES  </h2><pre><br>       To accept connections, the following steps are performed:<br><br>           1.  A socket is created with socket(2).<br><br>           2.  The socket is bound to a local address using bind(2), so that<br>               other sockets may be connect(2)ed to it.<br><br>           3.  A willingness to accept incoming connections and a queue<br>               limit for incoming connections are specified with <b>listen</b>().<br><br>           4.  Connections are accepted with accept(2).<br><br>       POSIX.1 does not require the inclusion of <i>&lt;sys/types.h&gt;</i>, and this<br>       header file is not required on Linux.  However, some historical (BSD)<br>       implementations required this header file, and portable applications<br>       are probably wise to include it.<br><br>       The behavior of the <i>backlog</i> argument on TCP sockets changed with<br>       Linux 2.2.  Now it specifies the queue length for <i>completely</i><br>       established sockets waiting to be accepted, instead of the number of<br>       incomplete connection requests.  The maximum length of the queue for<br>       incomplete sockets can be set using<br>       <i>/proc/sys/net/ipv4/tcp_max_syn_backlog</i>.  When syncookies are enabled<br>       there is no logical maximum length and this setting is ignored.  See<br>       tcp(7) for more information.<br><br>       If the <i>backlog</i> argument is greater than the value in<br>       <i>/proc/sys/net/core/somaxconn</i>, then it is silently truncated to that<br>       value; the default value in this file is 128.  In kernels before<br>       2.4.25, this limit was a hard coded value, <b>SOMAXCONN</b>, with the value<br>       128.<br></pre><br><h2>EXAMPLE  </h2><pre><br>       See bind(2).<br></pre><br><h2>SEE ALSO  </h2><pre><br>       accept(2), bind(2), connect(2), socket(2), socket(7)<br></pre><br><h2>COLOPHON  </h2><pre><br>       This page is part of release 4.02 of the Linux <i>man-pages</i> project.  A<br>       description of the project, information about reporting bugs, and the<br>       latest version of this page, can be found at<br>       http://www.kernel.org/doc/man-pages/.<br><br><span class=\"footline\">Linux                            2015-08-08                        LISTEN(2)</span><br></pre><br>"}