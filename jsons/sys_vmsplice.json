{"Man page": "<pre><br><span class=\"headline\">VMSPLICE(2)               Linux Programmer's Manual              VMSPLICE(2)</span><br></pre><br><h2>NAME  </h2><pre><br>       vmsplice - splice user pages into a pipe<br></pre><br><h2>SYNOPSIS  </h2><pre><br>       <b>#define _GNU_SOURCE         </b>/* See feature_test_macros(7) */<br>       <b>#include &lt;fcntl.h&gt;</b><br>       <b>#include &lt;sys/uio.h&gt;</b><br><br>       <b>ssize_t vmsplice(int </b><i>fd</i><b>, const struct iovec *</b><i>iov</i><b>,</b><br>                        <b>unsigned long </b><i>nr_segs</i><b>, unsigned int </b><i>flags</i><b>);</b><br></pre><br><h2>DESCRIPTION  </h2><pre><br>       The <b>vmsplice</b>() system call maps <i>nr_segs</i> ranges of user memory<br>       described by <i>iov</i> into a pipe.  The file descriptor <i>fd</i> must refer to a<br>       pipe.<br><br>       The pointer <i>iov</i> points to an array of <i>iovec</i> structures as defined in<br>       <i>&lt;sys/uio.h&gt;</i>:<br><br>           struct iovec {<br>               void  *iov_base;        /* Starting address */<br>               size_t iov_len;         /* Number of bytes */<br>           };<br><br>       The <i>flags</i> argument is a bit mask that is composed by ORing together<br>       zero or more of the following values:<br><br>       <b>SPLICE_F_MOVE      </b>Unused for <b>vmsplice</b>(); see splice(2).<br><br>       <b>SPLICE_F_NONBLOCK  </b>Do not block on I/O; see splice(2) for further<br>                          details.<br><br>       <b>SPLICE_F_MORE      </b>Currently has no effect for <b>vmsplice</b>(), but may be<br>                          implemented in the future; see splice(2).<br><br>       <b>SPLICE_F_GIFT      </b>The user pages are a gift to the kernel.  The<br>                          application may not modify this memory ever,<br>                          otherwise the page cache and on-disk data may<br>                          differ.  Gifting pages to the kernel means that a<br>                          subsequent splice(2) <b>SPLICE_F_MOVE </b>can<br>                          successfully move the pages; if this flag is not<br>                          specified, then a subsequent splice(2)<br>                          <b>SPLICE_F_MOVE </b>must copy the pages.  Data must also<br>                          be properly page aligned, both in memory and<br>                          length.<br></pre><br><h2>RETURN VALUE  </h2><pre><br>       Upon successful completion, <b>vmsplice</b>() returns the number of bytes<br>       transferred to the pipe.  On error, <b>vmsplice</b>() returns -1 and <i>errno</i><br>       is set to indicate the error.<br></pre><br><h2>ERRORS  </h2><pre><br>       <b>EAGAIN SPLICE_F_NONBLOCK </b>was specified in <i>flags</i>, and the operation<br>              would block.<br><br>       <b>EBADF  </b><i>fd</i> either not valid, or doesn't refer to a pipe.<br><br>       <b>EINVAL </b><i>nr_segs</i> is greater than <b>IOV_MAX</b>; or memory not aligned if<br>              <b>SPLICE_F_GIFT </b>set.<br><br>       <b>ENOMEM </b>Out of memory.<br></pre><br><h2>VERSIONS  </h2><pre><br>       The <b>vmsplice</b>() system call first appeared in Linux 2.6.17; library<br>       support was added to glibc in version 2.5.<br></pre><br><h2>CONFORMING TO  </h2><pre><br>       This system call is Linux-specific.<br></pre><br><h2>NOTES  </h2><pre><br>       <b>vmsplice</b>() follows the other vectorized read/write type functions<br>       when it comes to limitations on the number of segments being passed<br>       in.  This limit is <b>IOV_MAX </b>as defined in <i>&lt;limits.h&gt;</i>.  Currently, this<br>       limit is 1024.<br></pre><br><h2>SEE ALSO  </h2><pre><br>       splice(2), tee(2)<br></pre><br><h2>COLOPHON  </h2><pre><br>       This page is part of release 4.02 of the Linux <i>man-pages</i> project.  A<br>       description of the project, information about reporting bugs, and the<br>       latest version of this page, can be found at<br>       http://www.kernel.org/doc/man-pages/.<br><br><span class=\"footline\">Linux                            2014-10-02                      VMSPLICE(2)</span><br></pre><br>"}